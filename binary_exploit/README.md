# Binary Exploit

+ Buffer Overflow
+ Shellcode
+ ret2libc
+ ROP

## Buffer Overflow

**Buffer overflow** occurs when data written to a buffer overflows the bufferâ€™s capacity, which result in overwriting the memory in adjacent locations. Buffers are memory storage regions that hold transferred data temporarily. Therefore, by overflowing the buffers, the execution path of the program will be changed which might damage the program, <u>expose private information</u>, or <u>gain control over the program</u>. As a result, by knowing the memory layout of a program, one can intentionally feed input that the buffer cannot store, and overwrite areas that hold executable code, replacing it with their own code.

<img src="https://github.com/mhsuab/CTF/blob/master/binary_exploit/BufferOverflow.png" alt="BufferOverflow" style="zoom:50%;" />

## Shellcode

A shellcode is a small piece of code used as the [payload](https://en.wikipedia.org/wiki/Payload_(computing)) in the [exploitation](https://en.wikipedia.org/wiki/Exploit_(computer_security)) of a software [vulnerability](https://en.wikipedia.org/wiki/Vulnerability_(computing)). Shellcode is used to directly manipulate registers and the functionality of a exploited program and is commonly written in assembly language. Binary exploit challenges often involve writing a shellcode and inject it into the program to get control of the remote server, and then leak out the flag.

## ret2libc

**Return-to-libc attack** is a method of exploiting a <u>buffer overflow</u> on a system having <u>non-executable stack</u>. It is similar to <u>standard buffer overflow</u>. However, since no executable code is allowed on the stack, we don't just inject shellcode but overwrite the address with a function on libc, the standard C library which contains all the standard functions that can be used by any C program. As the function do not reside on stack, we can then bypass the stack protection and execute the code.

<img src="https://github.com/mhsuab/CTF/blob/master/binary_exploit/ret2libc.png" alt="ret2libc" style="zoom:48%;" />



## ROP

ROP stands for Return Oriented Programming, in this technique, an attacker gains control of the [call stack](https://en.wikipedia.org/wiki/Call_stack) to hijack the program by using some [machine instruction](https://en.wikipedia.org/wiki/Machine_instruction) sequences that are already present in the machine's memory, called "gadgets". Each of the gadgets end with a return instruction, by utilizing those gadgets, we can possibly modify some address and control the flow of the program. The main idea of ROP attack is to get the control over EIP and jumps to the code we want to execute using a chain of carefully chosen ROP gadgets. ROP is mostly used to bypass the protection in the program such as NX/DEP or ALSR.

ROPGadget is a useful tool to search for gadgets on the binaries or even create a ROP chain.

<img src="https://github.com/mhsuab/CTF/blob/master/binary_exploit/ROP.png" alt="ROP" style="zoom:48%;" />

